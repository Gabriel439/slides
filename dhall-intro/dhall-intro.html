<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Gabriel Gonzalez" />
  <meta name="date" content="2020-12-15" />
  <title>Dhall: A programmable configuration language</title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="https://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <script src="https://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Dhall: A programmable configuration language</h1>
  <p class="author">
Gabriel Gonzalez
  </p>
  <p class="date">December 15, 2020</p>
</div>
<div id="overview" class="slide section level1">
<h1>Overview</h1>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@4/distr/fira_code.css">
<style>
code {
  font-family: "Fira Code";
}
</style>
<p>This talk is an introduction to Dhall for functional programmers.</p>
<p>In this talk, I will cover:</p>
<ul>
<li>How to use Dhall as a programmable configuration file format</li>
<li>How Dhall compares to other alternatives</li>
<li>How to harness Dhall’s language security guarantees</li>
</ul>
</div>
<div id="what-is-dhall" class="slide section level1">
<h1>What is Dhall?</h1>
<p>Dhall is a <a href="https://docs.dhall-lang.org/discussions/Programmable-configuration-files.html">programmable configuration language</a> that you can think of as: <strong>JSON + functions + types + imports</strong></p>
<p>Dhall originated as an academic exercise to settle the following question:</p>
<blockquote>
<p>Would people tolerate programmable configuration files if they were not Turing-complete?</p>
</blockquote>
<p>The project then grew beyond my expectations, so I went with the flow and learned a lot along the way.</p>
</div>
<div id="dhall-is-like-json" class="slide section level1">
<h1>Dhall is like JSON</h1>
<p>When I say Dhall is like JSON I mean that:</p>
<ul>
<li>Dhall can model scalars, records, and lists (and other things)</li>
<li>You can marshal a Dhall configuration file directly into a program as data</li>
</ul>
<p>Here is an example Dhall configuration file:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1"></a>{ home       <span class="ot">=</span> <span class="st">&quot;/home/bill&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>, privateKey <span class="ot">=</span> <span class="st">&quot;/home/bill/.ssh/id_ed25519&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>, publicKey  <span class="ot">=</span> <span class="st">&quot;/home/bill/.ssh/id_ed25519.pub&quot;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>}</span></code></pre></div>
<p>… which corresponds to this JSON:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a>$ <span class="ex">dhall-to-json</span> --file ./config.dhall <span class="kw">|</span> <span class="fu">tee</span> ./config.json</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="dt">&quot;home&quot;</span><span class="fu">:</span>       <span class="st">&quot;/home/bill&quot;</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="dt">&quot;privateKey&quot;</span><span class="fu">:</span> <span class="st">&quot;/home/bill/.ssh/id_ed25519&quot;</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="dt">&quot;publicKey&quot;</span><span class="fu">:</span>  <span class="st">&quot;/home/bill/.ssh/id_ed25519.pub&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div id="json-to-dhall" class="slide section level1">
<h1>JSON to Dhall</h1>
<p>You can also migrate an existing JSON configuration to Dhall</p>
<p>For example, this JSON:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1"></a><span class="ot">[</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>    <span class="dt">&quot;discontinued&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Google Pixel XL 128GB Unlocked&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">{</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Apple iPhone SE (64GB, Black)&quot;</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>  <span class="fu">}</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="ot">]</span></span></code></pre></div>
<p>… corresponds to this Dhall configuration:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a>$ <span class="ex">json-to-dhall</span> --file ./inventory.json</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb6-1"><a href="#cb6-1"></a>[ { description <span class="ot">=</span> <span class="st">&quot;Google Pixel XL 128GB Unlocked&quot;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  , discontinued <span class="ot">=</span> <span class="dt">Some</span> <span class="dt">False</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  , <span class="fu">id</span> <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  }</span>
<span id="cb6-5"><a href="#cb6-5"></a>, { description <span class="ot">=</span> <span class="st">&quot;Apple iPhone SE (64GB, Black)&quot;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>  , discontinued <span class="ot">=</span> <span class="dt">None</span> <span class="dt">Bool</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>  , <span class="fu">id</span> <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>  }</span>
<span id="cb6-9"><a href="#cb6-9"></a>]</span></code></pre></div>
</div>
<div id="dhall-can-also-generate-yaml" class="slide section level1">
<h1>Dhall can also generate YAML</h1>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">-- ./students.dhall</span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>[ { name <span class="ot">=</span> <span class="st">&quot;John Doe&quot;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  , age <span class="ot">=</span> <span class="dv">14</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  }</span>
<span id="cb7-6"><a href="#cb7-6"></a>, { name <span class="ot">=</span> <span class="st">&quot;Mary Jane&quot;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  , age <span class="ot">=</span> <span class="dv">13</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>  }</span>
<span id="cb7-9"><a href="#cb7-9"></a>]</span></code></pre></div>
<p>… corresponds to this YAML:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a>$ <span class="ex">dhall-to-yaml</span> --file ./students.dhall </span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">age</span><span class="kw">:</span><span class="at"> </span><span class="dv">14</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> John Doe</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="kw">-</span><span class="at"> </span><span class="fu">age</span><span class="kw">:</span><span class="at"> </span><span class="dv">13</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Mary Jane</span></span></code></pre></div>
</div>
<div id="yaml-to-dhall" class="slide section level1">
<h1>YAML to Dhall</h1>
<p>You can also convert YAML to Dhall</p>
<p>For example, this YAML:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">execution</span><span class="kw">:</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="kw">-</span><span class="at"> </span><span class="fu">concurrency</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="at">  </span><span class="fu">hold-for</span><span class="kw">:</span><span class="at"> 5m</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="at">  </span><span class="fu">ramp-up</span><span class="kw">:</span><span class="at"> 2m</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="at">  </span><span class="fu">scenario</span><span class="kw">:</span><span class="at"> yaml_example</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="at">  </span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="fu">scenarios</span><span class="kw">:</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="at">  </span><span class="fu">yaml_example</span><span class="kw">:</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="at">    </span><span class="fu">retrieve-resources</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="at">    </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="at">      </span><span class="kw">-</span><span class="at"> http://example.com/</span></span></code></pre></div>
<p>… corresponds to this Dhall configuration:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a>$ <span class="ex">yaml-to-dhall</span> --file ./ci.yaml</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb12-1"><a href="#cb12-1"></a>{ execution <span class="ot">=</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  [ { concurrency <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>    , hold<span class="op">-</span>for <span class="ot">=</span> <span class="st">&quot;5m&quot;</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>    , ramp<span class="op">-</span>up <span class="ot">=</span> <span class="st">&quot;2m&quot;</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>    , scenario <span class="ot">=</span> <span class="st">&quot;yaml_example&quot;</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>    }</span>
<span id="cb12-7"><a href="#cb12-7"></a>  ]</span>
<span id="cb12-8"><a href="#cb12-8"></a>, scenarios<span class="op">.</span>yaml_example <span class="ot">=</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>  { requests <span class="ot">=</span> [ <span class="st">&quot;http://example.com/&quot;</span> ]</span>
<span id="cb12-10"><a href="#cb12-10"></a>  , retrieve<span class="op">-</span>resources <span class="ot">=</span> <span class="dt">False</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>  }</span>
<span id="cb12-12"><a href="#cb12-12"></a>}</span></code></pre></div>
</div>
<div id="other-supported-file-formats" class="slide section level1">
<h1>Other supported file formats</h1>
<p>You can convert between Dhall and the following file formats:</p>
<ul>
<li>JSON - <code>dhall-to-json</code> / <code>json-to-dhall</code></li>
<li>YAML - <code>dhall-to-yaml</code> / <code>yaml-to-dhall</code></li>
<li>XML - <code>dhall-to-xml</code> / <code>xml-to-dhall</code></li>
<li>Bash - <code>dhall-to-bash</code></li>
</ul>
<h2 id="real-world-example---dhall-to-yaml">Real-world example - Dhall to YAML</h2>
<p>Here is a more “real world” example of a Dhall configuration for Kubernetes:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb13-1"><a href="#cb13-1"></a><span class="co">-- ./deployment.dhall</span></span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="kw">let</span> kubernetes <span class="ot">=</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>      https<span class="op">://</span>raw<span class="op">.</span>githubusercontent<span class="op">.</span>com<span class="op">/</span>dhall<span class="op">-</span>lang<span class="op">/</span>dhall<span class="op">-</span>kubernetes<span class="op">/</span>master<span class="op">/</span>package<span class="op">.</span>dhall sha256<span class="op">:</span>ef3845f617b91eaea1b7abb5bd62aeebffd04bcc592d82b7bd6b39dda5e5d545</span>
<span id="cb13-5"><a href="#cb13-5"></a></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="kw">in</span>  kubernetes<span class="op">.</span><span class="dt">Deployment</span><span class="ot">::</span>{</span>
<span id="cb13-7"><a href="#cb13-7"></a>    , metadata <span class="ot">=</span> kubernetes<span class="op">.</span><span class="dt">ObjectMeta</span><span class="ot">::</span>{ name <span class="ot">=</span> <span class="dt">Some</span> <span class="st">&quot;nginx&quot;</span> }</span>
<span id="cb13-8"><a href="#cb13-8"></a>    , spec <span class="ot">=</span> <span class="dt">Some</span> kubernetes<span class="op">.</span><span class="dt">DeploymentSpec</span><span class="ot">::</span>{</span>
<span id="cb13-9"><a href="#cb13-9"></a>      , selector <span class="ot">=</span> kubernetes<span class="op">.</span><span class="dt">LabelSelector</span><span class="ot">::</span>{</span>
<span id="cb13-10"><a href="#cb13-10"></a>        , matchLabels <span class="ot">=</span> <span class="dt">Some</span> (toMap { name <span class="ot">=</span> <span class="st">&quot;nginx&quot;</span> })</span>
<span id="cb13-11"><a href="#cb13-11"></a>        }</span>
<span id="cb13-12"><a href="#cb13-12"></a>      , replicas <span class="ot">=</span> <span class="dt">Some</span> <span class="dv">2</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>      , template <span class="ot">=</span> kubernetes<span class="op">.</span><span class="dt">PodTemplateSpec</span><span class="ot">::</span>{</span>
<span id="cb13-14"><a href="#cb13-14"></a>        , metadata <span class="ot">=</span> kubernetes<span class="op">.</span><span class="dt">ObjectMeta</span><span class="ot">::</span>{ name <span class="ot">=</span> <span class="dt">Some</span> <span class="st">&quot;nginx&quot;</span> }</span>
<span id="cb13-15"><a href="#cb13-15"></a>        , spec <span class="ot">=</span> <span class="dt">Some</span> kubernetes<span class="op">.</span><span class="dt">PodSpec</span><span class="ot">::</span>{</span>
<span id="cb13-16"><a href="#cb13-16"></a>          , containers <span class="ot">=</span></span>
<span id="cb13-17"><a href="#cb13-17"></a>            [ kubernetes<span class="op">.</span><span class="dt">Container</span><span class="ot">::</span>{</span>
<span id="cb13-18"><a href="#cb13-18"></a>              , name <span class="ot">=</span> <span class="st">&quot;nginx&quot;</span></span>
<span id="cb13-19"><a href="#cb13-19"></a>              , image <span class="ot">=</span> <span class="dt">Some</span> <span class="st">&quot;nginx:1.15.3&quot;</span></span>
<span id="cb13-20"><a href="#cb13-20"></a>              , ports <span class="ot">=</span> <span class="dt">Some</span></span>
<span id="cb13-21"><a href="#cb13-21"></a>                [ kubernetes<span class="op">.</span><span class="dt">ContainerPort</span><span class="ot">::</span>{ containerPort <span class="ot">=</span> <span class="dv">80</span> } ]</span>
<span id="cb13-22"><a href="#cb13-22"></a>              }</span>
<span id="cb13-23"><a href="#cb13-23"></a>            ]</span>
<span id="cb13-24"><a href="#cb13-24"></a>          }</span>
<span id="cb13-25"><a href="#cb13-25"></a>        }</span>
<span id="cb13-26"><a href="#cb13-26"></a>      }</span>
<span id="cb13-27"><a href="#cb13-27"></a>    }</span></code></pre></div>
<p>… which corresponds to this YAML Kubernetes configuration:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1"></a>$ <span class="ex">dhall-to-yaml</span> --file ./deployment.dhall</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="at">      </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="at">      </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx:1.15.3</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="at">          </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="at">          </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="at">            </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
</div>
<div id="real-world-example---yaml-to-dhall" class="slide section level1">
<h1>Real world example - YAML to Dhall</h1>
<p>The reverse direction works, too, if we provide a bit more information:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1"></a>$ <span class="ex">yaml-to-dhall</span> <span class="st">&#39;(https://raw.githubusercontent.com/dhall-lang/dhall-kubernetes/a4126b7f8f0c0935e4d86f0f596176c41efbe6fe/types.dhall).Deployment&#39;</span> --file ./kubernetes.yaml \</span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="kw">|</span> <span class="ex">dhall</span> rewrite-with-schemas --schemas <span class="st">&#39;https://raw.githubusercontent.com/dhall-lang/dhall-kubernetes/a4126b7f8f0c0935e4d86f0f596176c41efbe6fe/schemas.dhall&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">let</span> schemas <span class="ot">=</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>      https<span class="op">://</span>raw<span class="op">.</span>githubusercontent<span class="op">.</span>com<span class="op">/</span>dhall<span class="op">-</span>lang<span class="op">/</span>dhall<span class="op">-</span>kubernetes<span class="op">/</span>a4126b7f8f0c0935e4d86f0f596176c41efbe6fe<span class="op">/</span>schemas<span class="op">.</span>dhall</span>
<span id="cb17-3"><a href="#cb17-3"></a></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="kw">in</span>  schemas<span class="op">.</span><span class="dt">Deployment</span><span class="ot">::</span>{</span>
<span id="cb17-5"><a href="#cb17-5"></a>    , metadata <span class="ot">=</span> schemas<span class="op">.</span><span class="dt">ObjectMeta</span><span class="ot">::</span>{ name <span class="ot">=</span> <span class="dt">Some</span> <span class="st">&quot;nginx&quot;</span> }</span>
<span id="cb17-6"><a href="#cb17-6"></a>    , spec <span class="ot">=</span> <span class="dt">Some</span> schemas<span class="op">.</span><span class="dt">DeploymentSpec</span><span class="ot">::</span>{</span>
<span id="cb17-7"><a href="#cb17-7"></a>      , replicas <span class="ot">=</span> <span class="dt">Some</span> <span class="dv">2</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>      , selector <span class="ot">=</span> schemas<span class="op">.</span><span class="dt">LabelSelector</span><span class="ot">::</span>{</span>
<span id="cb17-9"><a href="#cb17-9"></a>        , matchLabels <span class="ot">=</span> <span class="dt">Some</span> [ { mapKey <span class="ot">=</span> <span class="st">&quot;name&quot;</span>, mapValue <span class="ot">=</span> <span class="st">&quot;nginx&quot;</span> } ]</span>
<span id="cb17-10"><a href="#cb17-10"></a>        }</span>
<span id="cb17-11"><a href="#cb17-11"></a>      , template <span class="ot">=</span> schemas<span class="op">.</span><span class="dt">PodTemplateSpec</span><span class="ot">::</span>{</span>
<span id="cb17-12"><a href="#cb17-12"></a>        , metadata <span class="ot">=</span> schemas<span class="op">.</span><span class="dt">ObjectMeta</span><span class="ot">::</span>{ name <span class="ot">=</span> <span class="dt">Some</span> <span class="st">&quot;nginx&quot;</span> }</span>
<span id="cb17-13"><a href="#cb17-13"></a>        , spec <span class="ot">=</span> <span class="dt">Some</span> schemas<span class="op">.</span><span class="dt">PodSpec</span><span class="ot">::</span>{</span>
<span id="cb17-14"><a href="#cb17-14"></a>          , containers <span class="ot">=</span></span>
<span id="cb17-15"><a href="#cb17-15"></a>            [ schemas<span class="op">.</span><span class="dt">Container</span><span class="ot">::</span>{</span>
<span id="cb17-16"><a href="#cb17-16"></a>              , image <span class="ot">=</span> <span class="dt">Some</span> <span class="st">&quot;nginx:1.15.3&quot;</span></span>
<span id="cb17-17"><a href="#cb17-17"></a>              , name <span class="ot">=</span> <span class="st">&quot;nginx&quot;</span></span>
<span id="cb17-18"><a href="#cb17-18"></a>              , ports <span class="ot">=</span> <span class="dt">Some</span> [ schemas<span class="op">.</span><span class="dt">ContainerPort</span><span class="ot">::</span>{ containerPort <span class="ot">=</span> <span class="dv">80</span> } ]</span>
<span id="cb17-19"><a href="#cb17-19"></a>              }</span>
<span id="cb17-20"><a href="#cb17-20"></a>            ]</span>
<span id="cb17-21"><a href="#cb17-21"></a>          }</span>
<span id="cb17-22"><a href="#cb17-22"></a>        }</span>
<span id="cb17-23"><a href="#cb17-23"></a>      }</span>
<span id="cb17-24"><a href="#cb17-24"></a>    }</span></code></pre></div>
</div>
<div id="native-language-bindings" class="slide section level1">
<h1>Native language bindings</h1>
<p>You can read a Dhall configuration file directly without going through a JSON intermediate, given a language binding:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb18-1"><a href="#cb18-1"></a><span class="ot">{-# LANGUAGE DeriveGeneric     #-}</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="ot">{-# LANGUAGE DeriveAnyClass    #-}</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="ot">{-# LANGUAGE OverloadedStrings #-}</span></span>
<span id="cb18-4"><a href="#cb18-4"></a></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="kw">module</span> <span class="dt">Example</span> <span class="kw">where</span></span>
<span id="cb18-6"><a href="#cb18-6"></a></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="kw">import</span> <span class="dt">Dhall</span> (<span class="dt">Generic</span>, <span class="dt">FromDhall</span>, <span class="dt">Text</span>)</span>
<span id="cb18-8"><a href="#cb18-8"></a></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Dhall</span></span>
<span id="cb18-10"><a href="#cb18-10"></a></span>
<span id="cb18-11"><a href="#cb18-11"></a><span class="kw">data</span> <span class="dt">Configuration</span> <span class="ot">=</span> <span class="dt">Configuration</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>    {<span class="ot"> home       ::</span> <span class="dt">Text</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>    ,<span class="ot"> privateKey ::</span> <span class="dt">Text</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>    ,<span class="ot"> publicKey  ::</span> <span class="dt">Text</span></span>
<span id="cb18-15"><a href="#cb18-15"></a>    } <span class="kw">deriving</span> (<span class="dt">Generic</span>, <span class="dt">FromDhall</span>, <span class="dt">Show</span>)</span>
<span id="cb18-16"><a href="#cb18-16"></a></span>
<span id="cb18-17"><a href="#cb18-17"></a><span class="ot">main ::</span> <span class="dt">IO</span> ()</span>
<span id="cb18-18"><a href="#cb18-18"></a>main <span class="ot">=</span> <span class="kw">do</span></span>
<span id="cb18-19"><a href="#cb18-19"></a>    config <span class="ot">&lt;-</span> Dhall.input Dhall.auto <span class="st">&quot;./config.dhall&quot;</span></span>
<span id="cb18-20"><a href="#cb18-20"></a></span>
<span id="cb18-21"><a href="#cb18-21"></a>    <span class="fu">print</span> (<span class="ot">config ::</span> <span class="dt">Configuration</span>)</span></code></pre></div>
</div>
<div id="language-bindings" class="slide section level1">
<h1>Language bindings</h1>
<p>The currently available language bindings are:</p>
<ul>
<li>Clojure</li>
<li>Haskell</li>
<li>Java (Unofficial)</li>
<li>Go</li>
<li>Ruby</li>
<li>Rust</li>
</ul>
<p>The most wished-for binding: Python</p>
<p>The latest list can be found at:</p>
<ul>
<li><a href="https://docs.dhall-lang.org/howtos/How-to-integrate-Dhall.html"><code>docs.dhall-lang.org</code> - How to integrate Dhall</a></li>
</ul>
</div>
<div id="dhall-is-a-programming-language" class="slide section level1">
<h1>Dhall is a programming language</h1>
<p>This means that you can factor out shared logic into (immutable) variables:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">let</span> user <span class="ot">=</span> <span class="st">&quot;bill&quot;</span></span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="kw">in</span>  { home       <span class="ot">=</span> <span class="st">&quot;/home/${user}&quot;</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>    , privateKey <span class="ot">=</span> <span class="st">&quot;/home/${user}/.ssh/id_ed25519&quot;</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>    , publicKey  <span class="ot">=</span> <span class="st">&quot;/home/${user}/.ssh/id_ed25519.pub&quot;</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>    }</span></code></pre></div>
<p>… and use programming features like string interpolation.</p>
</div>
<div id="dhall-has-functions" class="slide section level1">
<h1>Dhall has functions</h1>
<p>You can avoid repeating yourself (DRY) using functions:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">let</span> makeUser <span class="ot">=</span> \(user <span class="op">:</span> <span class="dt">Text</span>) <span class="ot">-&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>      <span class="kw">let</span> home       <span class="ot">=</span> <span class="st">&quot;/home/${user}&quot;</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>      <span class="kw">let</span> privateKey <span class="ot">=</span> <span class="st">&quot;${home}/.ssh/id_ed25519&quot;</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>      <span class="kw">let</span> publicKey  <span class="ot">=</span> <span class="st">&quot;${privateKey}.pub&quot;</span></span>
<span id="cb20-5"><a href="#cb20-5"></a></span>
<span id="cb20-6"><a href="#cb20-6"></a>      <span class="kw">in</span>  { home, privateKey, publicKey }</span>
<span id="cb20-7"><a href="#cb20-7"></a></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="kw">in</span>  [ makeUser <span class="st">&quot;bill&quot;</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>    , makeUser <span class="st">&quot;jane&quot;</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>    ]</span></code></pre></div>
<p>… which is equivalent to this JSON:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb21-1"><a href="#cb21-1"></a><span class="ot">[</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">{</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>    <span class="dt">&quot;home&quot;</span><span class="fu">:</span>       <span class="st">&quot;/home/bill&quot;</span><span class="fu">,</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="dt">&quot;privateKey&quot;</span><span class="fu">:</span> <span class="st">&quot;/home/bill/.ssh/id_ed25519&quot;</span><span class="fu">,</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>    <span class="dt">&quot;publicKey&quot;</span><span class="fu">:</span>  <span class="st">&quot;/home/bill/.ssh/id_ed25519.pub&quot;</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>  <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>  <span class="fu">{</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>    <span class="dt">&quot;home&quot;</span><span class="fu">:</span>       <span class="st">&quot;/home/jane&quot;</span><span class="fu">,</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>    <span class="dt">&quot;privateKey&quot;</span><span class="fu">:</span> <span class="st">&quot;/home/jane/.ssh/id_ed25519&quot;</span><span class="fu">,</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>    <span class="dt">&quot;publicKey&quot;</span><span class="fu">:</span>  <span class="st">&quot;/home/jane/.ssh/id_ed25519.pub&quot;</span></span>
<span id="cb21-11"><a href="#cb21-11"></a>  <span class="fu">}</span></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="ot">]</span></span></code></pre></div>
</div>
<div id="dhall-is-typed" class="slide section level1">
<h1>Dhall is typed</h1>
<p>You can validate configuration files ahead of time using types:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">let</span> <span class="dt">Config</span> <span class="op">:</span> <span class="dt">Type</span> <span class="ot">=</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>      { home       <span class="op">:</span> <span class="dt">Text</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>      , privateKey <span class="op">:</span> <span class="dt">Text</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>      , publicKey  <span class="op">:</span> <span class="dt">Text</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>      }</span>
<span id="cb22-6"><a href="#cb22-6"></a></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="kw">let</span> makeUser <span class="op">:</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">Config</span> <span class="ot">=</span> \(user <span class="op">:</span> <span class="dt">Text</span>) <span class="ot">-&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8"></a>      <span class="kw">let</span> home       <span class="op">:</span> <span class="dt">Text</span>   <span class="ot">=</span> <span class="st">&quot;/home/${user}&quot;</span></span>
<span id="cb22-9"><a href="#cb22-9"></a>      <span class="kw">let</span> privateKey <span class="op">:</span> <span class="dt">Text</span>   <span class="ot">=</span> <span class="st">&quot;${home}/.ssh/id_ed25519&quot;</span></span>
<span id="cb22-10"><a href="#cb22-10"></a>      <span class="kw">let</span> publicKey  <span class="op">:</span> <span class="dt">Text</span>   <span class="ot">=</span> <span class="st">&quot;${privateKey}.pub&quot;</span></span>
<span id="cb22-11"><a href="#cb22-11"></a>      <span class="kw">let</span> config     <span class="op">:</span> <span class="dt">Config</span> <span class="ot">=</span> { home, privateKey, publicKey }</span>
<span id="cb22-12"><a href="#cb22-12"></a>      <span class="kw">in</span>  config</span>
<span id="cb22-13"><a href="#cb22-13"></a></span>
<span id="cb22-14"><a href="#cb22-14"></a><span class="kw">let</span> configs <span class="op">:</span> <span class="dt">List</span> <span class="dt">Config</span> <span class="ot">=</span></span>
<span id="cb22-15"><a href="#cb22-15"></a>      [ makeUser <span class="st">&quot;bill&quot;</span></span>
<span id="cb22-16"><a href="#cb22-16"></a>      , makeUser <span class="st">&quot;jane&quot;</span></span>
<span id="cb22-17"><a href="#cb22-17"></a>      ]</span>
<span id="cb22-18"><a href="#cb22-18"></a></span>
<span id="cb22-19"><a href="#cb22-19"></a><span class="kw">in</span>  configs</span></code></pre></div>
</div>
<div id="dhall-has-imports" class="slide section level1">
<h1>Dhall has imports</h1>
<p>You can embed other expressions by path:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb23-1"><a href="#cb23-1"></a><span class="co">-- ./number.dhall</span></span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="dv">2</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb24-1"><a href="#cb24-1"></a><span class="co">-- This is valid Dhall code</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="op">./</span>number<span class="op">.</span>dhall <span class="op">+</span> <span class="op">./</span>number<span class="op">.</span>dhall</span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb25-1"><a href="#cb25-1"></a><span class="co">-- More common idiom, equivalent to the previous code:</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="kw">let</span> number <span class="ot">=</span> <span class="op">./</span>number<span class="op">.</span>dhall</span>
<span id="cb25-3"><a href="#cb25-3"></a></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="kw">in</span>  number <span class="op">+</span> number</span></code></pre></div>
<p>… or by environment variable:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb26-1"><a href="#cb26-1"></a><span class="st">&quot;Hello, my name is ${env:USER as Text}&quot;</span></span></code></pre></div>
</div>
<div id="dhall-has-imports-1" class="slide section level1">
<h1>Dhall has imports</h1>
<p>You can also embed other expressions by URL!</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">let</span> generate <span class="ot">=</span> https<span class="op">://</span>prelude<span class="op">.</span>dhall<span class="op">-</span>lang<span class="op">.</span>org<span class="op">/</span><span class="dt">List</span><span class="op">/</span>generate<span class="op">.</span>dhall</span>
<span id="cb27-2"><a href="#cb27-2"></a></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="kw">let</span> makeUser <span class="ot">=</span> \(user <span class="op">:</span> <span class="dt">Text</span>) <span class="ot">-&gt;</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>      <span class="kw">let</span> home       <span class="ot">=</span> <span class="st">&quot;/home/${user}&quot;</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>      <span class="kw">let</span> privateKey <span class="ot">=</span> <span class="st">&quot;${home}/.ssh/id_ed25519&quot;</span></span>
<span id="cb27-6"><a href="#cb27-6"></a>      <span class="kw">let</span> publicKey  <span class="ot">=</span> <span class="st">&quot;${privateKey}.pub&quot;</span></span>
<span id="cb27-7"><a href="#cb27-7"></a>      <span class="kw">in</span>  { home, privateKey, publicKey }</span>
<span id="cb27-8"><a href="#cb27-8"></a></span>
<span id="cb27-9"><a href="#cb27-9"></a><span class="kw">let</span> buildUser <span class="ot">=</span> \(<span class="fu">index</span> <span class="op">:</span> <span class="dt">Natural</span>) <span class="ot">-&gt;</span></span>
<span id="cb27-10"><a href="#cb27-10"></a>      makeUser <span class="st">&quot;build${Natural/show index}&quot;</span></span>
<span id="cb27-11"><a href="#cb27-11"></a></span>
<span id="cb27-12"><a href="#cb27-12"></a><span class="kw">let</span> <span class="dt">Config</span> <span class="ot">=</span></span>
<span id="cb27-13"><a href="#cb27-13"></a>      { home <span class="op">:</span> <span class="dt">Text</span></span>
<span id="cb27-14"><a href="#cb27-14"></a>      , privateKey <span class="op">:</span> <span class="dt">Text</span></span>
<span id="cb27-15"><a href="#cb27-15"></a>      , publicKey <span class="op">:</span> <span class="dt">Text</span></span>
<span id="cb27-16"><a href="#cb27-16"></a>      }</span>
<span id="cb27-17"><a href="#cb27-17"></a></span>
<span id="cb27-18"><a href="#cb27-18"></a><span class="kw">in</span>  generate <span class="dv">10</span> <span class="dt">Config</span> buildUser</span></code></pre></div>
<p>The language design ensures that URL imports are secure</p>
</div>
<div id="emergent-properties" class="slide section level1">
<h1>Emergent properties</h1>
<p>You can implement derived features by mixing these simpler features</p>
<p>For example, a package is just a (potentially nested) record that you import:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb28-1"><a href="#cb28-1"></a><span class="kw">let</span> <span class="dt">Prelude</span> <span class="ot">=</span> https<span class="op">://</span>prelude<span class="op">.</span>dhall<span class="op">-</span>lang<span class="op">.</span>org<span class="op">/</span>package<span class="op">.</span>dhall</span>
<span id="cb28-2"><a href="#cb28-2"></a></span>
<span id="cb28-3"><a href="#cb28-3"></a><span class="kw">in</span>  Prelude.Bool.not <span class="dt">True</span></span></code></pre></div>
<p>… and a template is just a Dhall function that interpolates text:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb29-1"><a href="#cb29-1"></a>\(companyName <span class="op">:</span> <span class="dt">Text</span>) <span class="ot">-&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>\(companySize <span class="op">:</span> <span class="dt">Natural</span>) <span class="ot">-&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>  &#39;&#39;</span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="op">&lt;</span>html<span class="op">&gt;</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>  <span class="op">&lt;</span>title<span class="op">&gt;</span><span class="dt">Welcome</span> to <span class="op">$</span>{companyName}<span class="op">!&lt;/</span>title<span class="op">&gt;</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>  <span class="op">&lt;</span>body<span class="op">&gt;</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>  <span class="op">&lt;</span>p<span class="op">&gt;</span><span class="dt">Welcome</span> to our humble company <span class="kw">of</span> <span class="op">$</span>{<span class="dt">Natural</span><span class="op">/</span><span class="fu">show</span> companySize} people<span class="op">!&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>  <span class="op">&lt;/</span>body<span class="op">&gt;</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>  <span class="op">&lt;/</span>html<span class="op">&gt;</span></span>
<span id="cb29-10"><a href="#cb29-10"></a>  &#39;&#39;</span></code></pre></div>
</div>
<div id="dhall-is-total" class="slide section level1">
<h1>Dhall is total</h1>
<p>Dhall is a <em>total</em> functional programming language</p>
<p>This means Dhall configuration files never hang, crash, or throw exceptions</p>
<p>One benefit of being total is strong normalization:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb30-1"><a href="#cb30-1"></a><span class="op">$</span> dhall repl</span>
<span id="cb30-2"><a href="#cb30-2"></a>⊢ <span class="op">:</span><span class="kw">let</span> generate <span class="ot">=</span> https<span class="op">://</span>prelude<span class="op">.</span>dhall<span class="op">-</span>lang<span class="op">.</span>org<span class="op">/</span><span class="dt">List</span><span class="op">/</span>generate<span class="op">.</span>dhall</span>
<span id="cb30-3"><a href="#cb30-3"></a></span>
<span id="cb30-4"><a href="#cb30-4"></a>generate <span class="op">:</span> <span class="ot">∀</span>(n <span class="op">:</span> <span class="dt">Natural</span>) <span class="ot">→</span> <span class="ot">∀</span>(a <span class="op">:</span> <span class="dt">Type</span>) <span class="ot">→</span> <span class="ot">∀</span>(f <span class="op">:</span> <span class="dt">Natural</span> <span class="ot">→</span> a) <span class="ot">→</span> <span class="dt">List</span> a</span>
<span id="cb30-5"><a href="#cb30-5"></a></span>
<span id="cb30-6"><a href="#cb30-6"></a>⊢ generate <span class="dv">10</span></span>
<span id="cb30-7"><a href="#cb30-7"></a></span>
<span id="cb30-8"><a href="#cb30-8"></a>λ(a <span class="op">:</span> <span class="dt">Type</span>) <span class="ot">→</span></span>
<span id="cb30-9"><a href="#cb30-9"></a>λ(f <span class="op">:</span> <span class="dt">Natural</span> <span class="ot">→</span> a) <span class="ot">→</span></span>
<span id="cb30-10"><a href="#cb30-10"></a>  [ f <span class="dv">0</span>, f <span class="dv">1</span>, f <span class="dv">2</span>, f <span class="dv">3</span>, f <span class="dv">4</span>, f <span class="dv">5</span>, f <span class="dv">6</span>, f <span class="dv">7</span>, f <span class="dv">8</span>, f <span class="dv">9</span> ]</span></code></pre></div>
</div>
</body>
</html>
